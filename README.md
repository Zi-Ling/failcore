[‰∏≠Êñá](README_ZH.md) | English
# FailCore

> **The "Safety Airbag" for AI Agents.** üõ°Ô∏è  
> **Status:** Beta (0.1.x) ¬∑ **Pip Install:** `failcore` ¬∑ **License:** Apache 2.0

[![PyPI version](https://badge.fury.io/py/failcore.svg)](https://badge.fury.io/py/failcore)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)

**When your agent breaks, you don't need better prompts ‚Äî you need a circuit breaker.**

FailCore is a **fail-fast execution runtime** for AI agents.  
It does not try to make agents smarter ‚Äî it makes them **safe and reliable**.

While frameworks like LangChain focus on *planning*, FailCore focuses on what happens **during execution**:
enforcing permissions, blocking side-effects (network & filesystem), and generating forensic audit logs.

---

## ‚ñ∂Ô∏è Execution-Time Protection (Live Demo)

FailCore enforces security **at tool invocation time** ‚Äî  
before any network or filesystem side-effect occurs.

<p align="center">
  <img src="./assets/gif/2025_12_25_demo.gif" width="820" />
</p>

> Demo: Tool-level SSRF protection with strict network policy and full execution trace.

---

## üì∏ See It In Action (Audit Report)

FailCore automatically generates audit HTML reports for every run.  
*(Below: FailCore blocking a real-world path traversal attack generated by an LLM)*

![FailCore Audit Report](/assets/images/audit.jpeg)

> *This audit report captures a failed execution, providing a structured timeline, incident analysis, and trace-backed evidence for post-incident inspection.*

---

## ‚ú® What's New (v0.1.x)

- üõ°Ô∏è **SSRF Protection** ‚Äî Network-layer validation (DNS resolution and private IP checks).
- üìÇ **Filesystem Sandbox** ‚Äî Detects and blocks `../` path traversal attacks.
- üìä **Audit Reports** ‚Äî One-command generation of professional HTML dashboards.
- üéØ **Semantic Status** ‚Äî Clear distinction between `BLOCKED` (threat neutralized) vs `FAIL` (tool error).

---

## üî• Quick Start

### 1. Install

```bash
pip install failcore
```

### 2. Protect Your Tools (Zero-Touch)

Wrap your existing functions (or LangChain tools) with a FailCore Session.

```python
from failcore import Session, presets

# Enable strict security mode (network & sandbox protection ON)
session = Session(
    validator=presets.fs_safe(strict=True),
    sandbox="./workspace"  # sandbox
)

@session.tool  # 
def write_file(path: str, content: str):
    with open(path, "w") as f:
        f.write(content)

# --- Simulation: LLM tries to attack ---
result = session.call("write_file", path="../etc/passwd", content="hack")

# Example output:
print(f"Status: {result.status}")        # e.g. BLOCKED
print(f"Error: {result.error.message}") # Path traversal detected
```

### 3. Generate Report

```bash
failcore show
failcore report --last > report.html
```

![FailCore Report](/assets/images/report_screenshot.png)

> *The report provides a human-readable summary of execution results, highlighting blocked operations and failure points.*

---

## Why FailCore?

Modern AI agents are fragile. FailCore addresses core execution risks:

| Risk | Without FailCore | With FailCore |
|------|------------------|---------------|
| **Security (SSRF)** | Agent can access internal metadata services. | **BLOCKED** by network-layer validation. |
| **Filesystem** | Agent can read/write arbitrary files via `../`. | **BLOCKED** by strict sandbox enforcement. |
| **Cost** | One step fails, entire workflow restarts. | **DETERMINISTIC REPLAY** of successful steps. |
| **Visibility** | Thousands of log lines. | **FORENSIC REPORT** with clear verdicts. |

---

## LangChain Integration

```python
from failcore import Session, presets
from failcore.adapters.langchain import map_langchain_tool

session = Session(validator=presets.fs_safe(strict=True))
safe_tool_spec = map_langchain_tool(my_langchain_tool)
session.invoker.register_spec(safe_tool_spec)
```

---

## Contributing

Contributions are welcome.  
If you are building agent systems that need stronger execution guarantees, we would love your feedback.

---

## License

Apache License 2.0 ‚Äî see [LICENSE](LICENSE).

Copyright ¬© 2025 ZiLing
